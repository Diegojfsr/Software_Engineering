A **junÃ§Ã£o recursiva (Recursive Join)** no SQL Ã© uma tÃ©cnica poderosa para **trabalhar com dados hierÃ¡rquicos**, como estruturas de funcionÃ¡rios e gerentes, Ã¡rvores genealÃ³gicas ou qualquer relaÃ§Ã£o autorreferenciada. 
ğŸ“Œ **Permite combinar dados da mesma tabela repetidamente, acumulando registros atÃ© que nÃ£o haja mais mudanÃ§as no conjunto de resultados**.

ğŸ’¡ **Usando expressÃµes de tabela comuns recursivas (CTEs), a junÃ§Ã£o recursiva simplifica a consulta de hierarquias complexas**.

### **O que Ã© uma JunÃ§Ã£o Recursiva no SQL?**

âœ… **Utiliza expressÃµes de tabela comuns recursivas (CTEs)** para manipular dados hierÃ¡rquicos. 
âœ… **Consulta repetidamente uma tabela atÃ© que todos os registros relacionados sejam processados**. 
âœ… **Ãštil para lidar com relaÃ§Ãµes pai-filho, como organogramas empresariais**. 
âœ… **Facilita a recuperaÃ§Ã£o de dados estruturados em nÃ­veis hierÃ¡rquicos**.

### **Sintaxe do SQL Recursive Join**

```
WITH RECURSIVE nome_cte AS (
    -- Consulta Ã¢ncora: Seleciona o ponto de inÃ­cio
    SELECT colunas  
    FROM tabela  
    WHERE condiÃ§Ã£o  

    UNION ALL  

    -- Consulta recursiva: Junta a CTE com a tabela para obter dados relacionados
    SELECT t.colunas  
    FROM tabela t  
    INNER JOIN nome_cte cte ON t.coluna = cte.coluna  
)  
SELECT * FROM nome_cte;
```

ğŸ“Œ **Aqui,** `nome_cte` **acumula registros atÃ© que toda a hierarquia seja processada**.

### **Exemplo: Organograma de FuncionÃ¡rios com JunÃ§Ã£o Recursiva**

ğŸ“Œ **Criar a tabela** `Funcionarios`:

**Tabela** `Funcionarios`

|**ID**|**Nome**|**ID do Gerente**|**Idade**|
|---|---|---|---|
|1|Ankit|NULL|32|
|2|Ayush|1|31|
|3|Piyush|1|42|
|4|Ramesh|2|31|
|5|Rohan|3|29|
|6|Harry|3|28|

ğŸ“Œ **Executando a junÃ§Ã£o recursiva para listar funcionÃ¡rios e seus gerentes**:

```
WITH RECURSIVE hierarquia_funcionarios AS (
    -- Seleciona o CEO
    SELECT employee_id, employee_name, manager_id, age  
    FROM Funcionarios  
    WHERE employee_id = 1  

    UNION ALL  

    -- Junta funcionÃ¡rios subordinados aos gerentes
    SELECT e.employee_id, e.employee_name, e.manager_id, e.age  
    FROM Funcionarios e  
    INNER JOIN hierarquia_funcionarios h ON e.manager_id = h.employee_id  
)  
SELECT * FROM hierarquia_funcionarios;
```

ğŸ”¹ **SaÃ­da:**

|**ID FuncionÃ¡rio**|**Nome**|**ID do Gerente**|**Idade**|
|---|---|---|---|
|1|Ankit|NULL|32|
|2|Ayush|1|31|
|3|Piyush|1|42|
|4|Ramesh|2|31|
|5|Rohan|3|29|
|6|Harry|3|28|

ğŸ“Œ **A consulta percorre toda a estrutura hierÃ¡rquica, do CEO aos funcionÃ¡rios subordinados**.

### **AplicaÃ§Ãµes da JunÃ§Ã£o Recursiva no SQL**

âœ” **RepresentaÃ§Ã£o de dados hierÃ¡rquicos** â†’ Como relaÃ§Ãµes entre funcionÃ¡rios e gerentes. 
âœ” **RelaÃ§Ãµes pai-filho** â†’ Categorias e subcategorias em catÃ¡logos de produtos. 
âœ” **AnÃ¡lise de redes** â†’ ExploraÃ§Ã£o de conexÃµes sociais e estrutura de grafos.

### **ConclusÃ£o**

âœ” **A junÃ§Ã£o recursiva no SQL Ã© essencial para trabalhar com dados estruturados hierarquicamente**. 
âœ” **Facilita consultas organizacionais, exploraÃ§Ã£o de produtos e anÃ¡lise de redes sociais**.
âœ” **Usando CTEs recursivas, podemos navegar e recuperar dados complexos de forma eficiente**.

ğŸ’¡ **Dominar SQL Recursive Join permitirÃ¡ consultas mais organizadas e eficientes!** ğŸš€
