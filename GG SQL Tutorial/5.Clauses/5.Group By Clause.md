A clÃ¡usula **GROUP BY** no **SQL** Ã© uma ferramenta poderosa usada para **organizar dados em grupos** com base em valores compartilhados em uma ou mais colunas.

ğŸ“Œ **Ã‰ frequentemente usada com funÃ§Ãµes agregadas** como **SUM, COUNT, AVG, MIN e MAX** para realizar operaÃ§Ãµes de resumo em cada grupo, ajudando a **extrair informaÃ§Ãµes Ãºteis de conjuntos de dados grandes**.

Seja para **analisar vendas por regiÃ£o**, **usuÃ¡rios por faixa etÃ¡ria** ou **pedidos por categoria de produto**, a clÃ¡usula **GROUP BY** transforma **dados brutos em relatÃ³rios estruturados**.

### **O que Ã© a clÃ¡usula GROUP BY no SQL?**

A instruÃ§Ã£o **GROUP BY** no SQL **organiza dados idÃªnticos** em grupos com base **em colunas especificadas**.

ğŸ“Œ **Se um valor na coluna estiver presente em vÃ¡rias linhas, GROUP BY agrupa essas linhas juntas**. 
ğŸ“Œ **Ã‰ comumente usada com funÃ§Ãµes agregadas** para calcular **totais ou mÃ©dias por grupo**.

### **Pontos-chave sobre GROUP BY**

âœ… **GROUP BY Ã© usado na instruÃ§Ã£o SELECT**. 
âœ… **Sempre vem depois da clÃ¡usula WHERE**. 
âœ… **Deve ser usada antes da clÃ¡usula ORDER BY**. 
âœ… **Pode ser usada junto com a clÃ¡usula HAVING para filtrar grupos**.

### **Sintaxe**

```
SELECT coluna1, funÃ§Ã£o_agregada(coluna2)
FROM nome_da_tabela
GROUP BY coluna1, coluna2;
```

ğŸ“Œ **FunÃ§Ã£o_agregada** pode ser **SUM(), AVG(), COUNT(), etc.** 
ğŸ“Œ **nome_da_tabela** Ã© a tabela onde o agrupamento ocorre.

### **Exemplos da clÃ¡usula GROUP BY no SQL**

Vamos criar **duas tabelas** chamadas **Employee** e **Student** para demonstrar o uso da clÃ¡usula **GROUP BY**.

### **Tabela Employee**

```
CREATE TABLE emp (
  emp_no INT PRIMARY KEY,
  name VARCHAR(50),
  sal DECIMAL(10,2),
  age INT
);

INSERT INTO emp (emp_no, name, sal, age) VALUES
(1, 'Aarav', 50000.00, 25),
(2, 'Aditi', 60000.50, 30),
(3, 'Aarav', 75000.75, 35),
(4, 'Anjali', 45000.25, 28),
(5, 'Chetan', 80000.00, 32),
(6, 'Divya', 65000.00, 27),
(7, 'Gaurav', 55000.50, 29),
(8, 'Divya', 72000.75, 31),
(9, 'Gaurav', 48000.25, 26),
(10, 'Divya', 83000.00, 33);
```

ğŸ“Œ Agora verificamos os registros inseridos:

```
SELECT * FROM emp;
```

### **Tabela Student**

```
CREATE TABLE student (
  name VARCHAR(50),
  year INT,
  subject VARCHAR(50)
);

INSERT INTO student (name, year, subject) VALUES
('Alice', 1, 'Mathematics'),
('Bob', 2, 'English'),
('Charlie', 3, 'Science'),
('David', 1, 'Mathematics'),
('Emily', 2, 'English'),
('Frank', 3, 'Science');
```

### **Exemplo 1: Agrupar por uma Ãºnica coluna**

ğŸ¯ **Calcular o total de salÃ¡rio para cada funcionÃ¡rio por nome.**

```
SELECT name, SUM(sal) 
FROM emp 
GROUP BY name;
```

##### **SaÃ­da**

|Nome|Total_SalÃ¡rio|
|---|---|
|Aarav|125000.75|
|Aditi|60000.50|
|Anjali|45000.25|
|Chetan|80000.00|
|Divya|220000.75|
|Gaurav|103000.75|

ğŸ“Œ **FuncionÃ¡rios com o mesmo nome foram agrupados** e **seus salÃ¡rios foram somados**.

### **Exemplo 2: Agrupar por mÃºltiplas colunas**

ğŸ¯ **Agrupar alunos por MATÃ‰RIA e ANO e contar quantos estÃ£o em cada grupo.**

```
SELECT subject, year, COUNT(*) 
FROM student 
GROUP BY subject, year;
```

##### **SaÃ­da**

|MatÃ©ria|Ano|Total_Alunos|
|---|---|---|
|English|2|2|
|Mathematics|1|2|
|Science|3|2|

ğŸ“Œ **Os alunos com mesma matÃ©ria e ano foram agrupados** e **contados**.

### **Usando a clÃ¡usula HAVING com GROUP BY**

ğŸ“Œ **WHERE filtra linhas individuais, HAVING filtra grupos agregados**.
ğŸ“Œ **NÃ£o podemos usar funÃ§Ãµes agregadas com WHERE, entÃ£o usamos HAVING**.

#### **Sintaxe**

```
SELECT coluna1, funÃ§Ã£o_agregada(coluna2)
FROM nome_da_tabela
WHERE condiÃ§Ã£o
GROUP BY coluna1, coluna2
HAVING condiÃ§Ã£o
ORDER BY coluna1, coluna2;
```

### **Exemplo 3: Usando HAVING**

ğŸ¯ **Mostrar funcionÃ¡rios cujo total de salÃ¡rio Ã© maior que 50.000**.

```
SELECT name, SUM(sal) 
FROM emp 
GROUP BY name 
HAVING SUM(sal) > 50000;
```

##### **SaÃ­da**

|Nome|Total_SalÃ¡rio|
|---|---|
|Aarav|125000.75|
|Aditi|60000.50|
|Chetan|80000.00|
|Divya|220000.75|
|Gaurav|103000.75|

ğŸ“Œ **Anjali foi excluÃ­da pois seu total de salÃ¡rio Ã© menor que 50.000**.

### **ConclusÃ£o**

ğŸ“Œ **A funÃ§Ã£o GROUP BY no SQL organiza dados idÃªnticos em grupos, permitindo anÃ¡lises agregadas**.

âœ… **Usada com funÃ§Ãµes como SUM(), COUNT(), AVG(), etc., para resumir dados eficientemente**. 
âœ… **A clÃ¡usula HAVING refinou os resultados ao aplicar condiÃ§Ãµes nos grupos**. 
âœ… **GROUP BY pode operar em uma ou vÃ¡rias colunas, tornando-se uma ferramenta versÃ¡til**.

ğŸš€ **Dominar GROUP BY tornarÃ¡ suas consultas SQL muito mais poderosas!**

